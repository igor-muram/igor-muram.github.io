let main_container=document.querySelector(".container");function CanvasSize(){}function OneActiveButton(){document.querySelectorAll(".one-button-active").forEach((function(t){let e=t.querySelectorAll(".button");e.forEach((function(t){t.addEventListener("click",(function(){[].forEach.call(e,(function(e){e===t||t.classList.contains("button-curve")||e.classList.remove("push")}),t)}))}))}))}function PushButtons(){document.querySelectorAll(".button").forEach((function(t){t.addEventListener("click",(function(){!t.classList.contains("disabled")&&t.classList.contains("can-push")&&t.classList.toggle("push")}))}))}function MutuallyExclusiveButtons(t,e){let n=t.querySelectorAll(".button"),o=e.querySelectorAll(".button");n.forEach((function(t){t.addEventListener("click",(function(){o.forEach((function(e){t.classList.contains("button-curve")||e.classList.remove("push")}))}))})),o.forEach((function(t){t.addEventListener("click",(function(){n.forEach((function(e){t.classList.contains("button-curve")||e.classList.remove("push")}))}))}))}function ConnectSections(){let t=document.querySelector(".form-main"),e=t.querySelector(".form__buttons-green"),n=t.querySelector(".form__buttons-orange"),o=document.querySelector(".section__buttons-create"),c=document.querySelector(".section__buttons-add"),s=document.querySelector(".section__buttons-selection"),i=document.querySelector(".list-curve");MutuallyExclusiveButtons(e,n),MutuallyExclusiveButtons(e,c),MutuallyExclusiveButtons(e,s),MutuallyExclusiveButtons(o,c),MutuallyExclusiveButtons(o,s),MutuallyExclusiveButtons(o,n),MutuallyExclusiveButtons(o,i),MutuallyExclusiveButtons(c,i),MutuallyExclusiveButtons(c,n),MutuallyExclusiveButtons(c,s)}function ConnectButtons(){let t=document.querySelectorAll(".button");t.forEach((function(e){e.addEventListener("click",(function(){[].forEach.call(t,(function(t){if(e.dataset.func===t.dataset.func&&e!==t&&null!=e.dataset.func&&null!=t.dataset.func&&""!=e.dataset.func&&""!=t.dataset.func&&!e.classList.contains("disabled")&&e.classList.contains("can-push")&&!t.classList.contains("disabled")&&t.classList.contains("can-push")){t.classList.toggle("push");let e=t.closest(".one-button-active").querySelectorAll(".button");[].forEach.call(e,(function(e){e!=t&&e.classList.remove("push")}),t)}}),e)}))}))}function PanelCollapse(){let t=document.querySelectorAll(".panel__collapse"),e=document.querySelectorAll(".panel"),n=document.querySelectorAll(".tab-link"),o=document.querySelector(".form-container"),c=document.getElementById("canvas");t.forEach((function(s){s.addEventListener("click",(function(){if(t.forEach((function(t){t.classList.toggle("active"),t.title=t.classList.contains("active")?"Expand panel":"Collapse panel"})),e.forEach((function(t){t.classList.toggle("collapse")})),n.forEach((function(t){t.classList.toggle("panel-collapsed")})),c.classList.toggle("panel-collapsed"),o.classList.toggle("panel-collapsed"),s.classList.contains("active")){s.closest(".panel_show").classList.remove("panel_show")}}))}));let s=document.querySelector(".panel");document.addEventListener("mousedown",(function(t){if(s.classList.contains("collapse")){let e=t.target,n=document.querySelector(".active-link"),o=document.querySelector(n.getAttribute("href")).parentElement.querySelector(".panel_show");if(null!==o&&!e.classList.contains("tab-link")){let t=e==o||o.contains(e),n=o.classList.contains("panel_show");!t&&n&&o.classList.remove("panel_show")}}}))}document.addEventListener("click",(function(){CanvasSize()})),OneActiveButton(),PushButtons(),main_container.classList.contains("preprocessor")&&ConnectSections(),ConnectButtons(),PanelCollapse();let canvas=document.getElementById("canvas2D"),container=document.querySelector(".container");function PopupWindow(){document.querySelectorAll(".popup").forEach((function(t){let e=t.querySelector(".popup__close"),n=t.querySelector(".popup__button-cancel"),o=t.querySelector(".popup__button-ok"),c=t.querySelectorAll(".popup__input");function s(){t.classList.remove("active"),container.classList.remove("pointer-none"),c.forEach((function(t){t.value=""}))}e.addEventListener("click",(function(){s()})),n.addEventListener("click",(function(){s()})),o.addEventListener("click",(function(){s()}))}))}function PopupWindowPosition(t,e){let n=document.getElementById(t);n.style.top=(document.body.clientHeight-n.offsetHeight)/2+"px",n.style.left=(document.body.clientWidth-n.offsetWidth)/2+"px",n.classList.add("active"),container.classList.add("pointer-none"),Drag(t,e)}PopupWindow(),canvas.addEventListener("contextmenu",(function(){PopupWindowPosition("drag-define-point","handle-define-point")}));let unpinned_form_count=0;function Drag(t,e){let n,o=[0,0],c=document.getElementById(e),s=document.getElementById(t),i=!1;Position(t),c.addEventListener("mousedown",(function(t){i=!0,o=[s.offsetLeft-t.clientX,s.offsetTop-t.clientY]})),document.addEventListener("mouseup",(function(){i=!1})),document.addEventListener("mousemove",(function(e){i&&(n={x:e.clientX,y:e.clientY},s.style.left=n.x+o[0]+"px",s.style.top=n.y+o[1]+"px",Position(t))}))}function Position(t){let e=document.getElementById(t);e.offsetTop<0&&(e.style.top="0px"),e.offsetLeft<0&&(e.style.left="0px"),e.offsetTop+e.clientHeight>container.clientHeight&&(e.style.top=container.clientHeight-e.clientHeight+"px"),e.offsetLeft+e.clientWidth>container.clientWidth&&(e.style.left=container.clientWidth-e.clientWidth+"px")}function Menu(){let t=document.querySelector(".file-button"),e=document.querySelector(".menu");t.addEventListener("click",(function(){t.classList.toggle("active"),e.classList.toggle("active")})),document.addEventListener("mousedown",(function(n){let o=n.target,c=o==e||e.contains(o),s=o==t,i=e.classList.contains("active");c||s||!i||(t.classList.remove("active"),e.classList.remove("active"))}))}let checkboxes=document.querySelectorAll(".checkbox"),forms=document.querySelectorAll(".form");function Checkbox(){checkboxes.forEach((function(t){t.addEventListener("click",(function(){let e=t.querySelector(".check"),n=t.closest(".checkbox-container"),o=n.querySelector(".quantity"),c=n.querySelector(".checkbox__input"),s=n.querySelector(".base");e.classList.toggle("is-checked"),null!==c&&c.classList.toggle("active"),null!==o&&o.classList.toggle("active"),null!==s&&s.classList.toggle("active");let i=document.querySelector(".form-mouse").querySelector(".form__checkbox-wrapper"),l=i.querySelectorAll(".is-checked"),a=i.querySelector(".first");1==l.length?l[0].closest(".checkbox-container")===a?a.style.marginRight="-48px":a.style.marginRight="48px":a.style.marginRight="0px"}))})),document.querySelectorAll(".base").forEach((function(t){t.addEventListener("click",(function(){let e=t.closest(".checkbox-container").querySelector(".checkbox"),n=new Event("click");e.dispatchEvent(n)}))}));let t=document.querySelectorAll(".quantity");document.querySelectorAll(".log__input").forEach((function(t){t.insertAdjacentHTML("afterend",'<div class="quantity-button quantity-up"><img src="img/arrow-down.svg" alt=""></div><div class="quantity-button quantity-down"><img src="img/arrow-down.svg" alt=""></div>')})),t.forEach((function(t){let e=t.querySelector("input"),n=t.querySelector(".quantity-up"),o=t.querySelector(".quantity-down");n.addEventListener("click",(function(){let t=new Event("change");e.value=parseFloat(e.value)+1,e.dispatchEvent(t)})),o.addEventListener("click",(function(){let t=new Event("change");e.value=parseFloat(e.value)-1,e.dispatchEvent(t)}))}))}function CheckKey(t){return t>="0"&&t<="9"||"."==t||"ArrowLeft"==t||"ArrowRight"==t||"Delete"==t||"Backspace"==t}let fix_checkboxes=document.querySelectorAll(".checkbox-fix");function ShowFloatingList(t,e,n,o){t.addEventListener(e,(function(e){let c=e.clientX,s=e.clientY,i=t.getBoundingClientRect(),l=document.querySelector(".form-container");if(o){let e=document.querySelector("body");i.y+t.offsetHeight+n.offsetHeight<=e.offsetHeight?n.style.top=s+"px":n.style.top=s-n.offsetHeight+"px",l.classList.contains("left-side")?n.style.left=c+"px":n.style.left=c-n.offsetWidth+"px"}else s-i.y+n.offsetHeight<=i.y+t.offsetHeight+50-s?n.style.top=s+"px":n.style.top=s-n.offsetHeight+"px",l.classList.contains("left-side")?(n.style.left=c+"px",n.style.right="auto"):(n.style.right=t.offsetWidth-(c-i.x)+"px",n.style.left="auto");n.classList.add("active")})),document.addEventListener("mousedown",(function(t){let e=t.target,o=e==n||n.contains(e),c=n.classList.contains("active");!o&&c&&n.classList.remove("active")}))}function Form(){if(main_container.classList.contains("preprocessor")){let t=document.querySelector(".form-variables");t.querySelector(".expander .block__heading").addEventListener("click",(function(){t.querySelector(".form__title").classList.toggle("show")}))}if(main_container.classList.contains("processor")){let t=document.querySelector(".form-task");t.querySelector(".expander .block__heading").addEventListener("click",(function(){t.querySelector(".form__title").classList.toggle("show")})),document.querySelectorAll(".form__input-wrapper").forEach((function(t){t.addEventListener("click",(function(t){CanvasSize(),t.stopPropagation()}))}))}function t(t){t.style.zIndex="1"+unpinned_form_count,[].forEach.call(forms,(function(e){e!==t&&(e.style.zIndex="1"+(unpinned_form_count-1))}),t)}forms.forEach((function(t){let e=t.getBoundingClientRect(),n=document.getElementById("canvas");t.dataset.top=e.y+"px",t.dataset.left=(n.clientWidth-t.clientWidth)/2+"px"})),forms.forEach((function(e){e.addEventListener("mousedown",(function(){t(e)}))}));let e=document.querySelector(".form-container"),n=document.querySelector(".form__control-wrapper"),o=n.querySelector(".form__control"),c=o.querySelector(".floating-list__button-collapse"),s=o.querySelector(".floating-list__button-move"),i=document.querySelector(".button-expand_form"),l=o.querySelectorAll(".checkbox");if(document.querySelectorAll(".form__close").forEach((function(t){t.addEventListener("click",(function(){t.closest(".form").classList.add("hide"),0==e.clientWidth&&i.classList.add("active"),a()}))})),document.querySelectorAll(".form__pin").forEach((function(e){e.addEventListener("click",(function(){e.classList.toggle("active"),e.title=e.classList.contains("active")?"Pin form":"Unpin form";let n=e.closest(".form");var o,c,s;o=n,c=n.id.toString(),s=n.querySelector(".form__handle").id.toString(),o.classList.contains("unpinned")?(o.classList.remove("unpinned"),unpinned_form_count--,o.style.zIndex="10",o.dataset.top=o.style.top,o.dataset.left=o.style.left):(unpinned_form_count++,o.style.top=o.dataset.top,o.style.left=o.dataset.left,t(o),o.classList.add("unpinned"),Drag(c,s))}))})),l.forEach((function(t){t.addEventListener("click",(function(){document.querySelector("."+t.dataset.form.toString()).classList.toggle("hide")}))})),a(),main_container.classList.contains("preprocessor")){let t=document.querySelector(".button-move"),n=e.querySelector(".list-move"),o=document.querySelector(".button-copy"),c=e.querySelector(".list-copy"),s=document.querySelector(".button-curve"),i=e.querySelector(".list-curve");ShowFloatingList(t,"click",n,!0),ShowFloatingList(o,"click",c,!0),ShowFloatingList(s,"click",i,!0)}function a(){for(let t=0;t<forms.length;t++)forms[t].classList.contains("hide")?l[t].querySelector(".check").classList.remove("is-checked"):l[t].querySelector(".check").classList.add("is-checked")}ShowFloatingList(n,"contextmenu",o,!1),c.addEventListener("click",(function(){o.classList.remove("active"),e.classList.add("hide"),i.classList.add("active")})),s.addEventListener("click",(function(){o.classList.remove("active"),e.classList.toggle("left-side"),i.classList.toggle("left-side")})),i.addEventListener("click",(function(){i.classList.remove("active"),document.querySelector(".form-main").classList.remove("hide"),e.classList.remove("hide"),a()}))}function Expander(){document.querySelectorAll(".expander .block__heading").forEach((function(t){t.addEventListener("click",(function(e){t.classList.toggle("active"),this.nextElementSibling.classList.toggle("active")}))}))}function contains(t,e){return-1!=t.find((t=>t===e))}function Select(){document.querySelectorAll(".select-box").forEach((function(t){t.addEventListener("click",(function(){let e=t.querySelector(".options-container"),n=e.querySelectorAll(".option"),o=t.querySelector(".selected");e.classList.toggle("active"),n.forEach((function(e){e.addEventListener("click",(function(){if(o.innerHTML=e.innerHTML,t.classList.contains("select-coords")){let t=document.querySelector(".footer"),n=document.querySelector(".form-mouse"),o=n.querySelector(".empty"),c=t.querySelector(".coords__axis-first"),s=t.querySelector(".coords__axis-second"),i=t.querySelector(".coords__axis-third"),l=n.querySelector(".form-coords__axis-first"),a=n.querySelector(".form-coords__axis-second"),r=n.querySelector(".form-coords__axis-third");"GC"==e.dataset.name?(c.textContent="X: ",s.textContent="Y: ",i.textContent="Z: ",l.textContent="X: ",a.textContent="Y: ",r.textContent="Z: ",o.style.width="25px"):"LC"==e.dataset.name?(c.textContent="XI: ",s.textContent="YI: ",i.textContent="ZI: ",l.textContent="XI: ",a.textContent="YI: ",r.textContent="ZI: ",o.style.width="30px"):"LP"==e.dataset.name&&(c.textContent="R: ",s.textContent="φ: ",i.textContent="Z: ",l.textContent="R: ",a.textContent="φ: ",r.textContent="Z: ",o.style.width="25px")}}))})),document.addEventListener("mousedown",(function(n){let o=n.target,c=o==t||t.contains(o),s=e.classList.contains("active");!c&&s&&e.classList.remove("active")}))}))}))}fix_checkboxes.forEach((function(t){t.addEventListener("click",(function(){document.querySelector("."+t.dataset.coord.toString()).classList.toggle("fixed")}))})),Form(),Expander(),Select();